import{v as w,s as r}from"./handleMessageError-d8b4ec4d.js";const y=document.querySelector(".switch"),m=document.querySelector(".login-container"),a=document.querySelector(".register-container"),L=document.querySelector(".login-container > input[type='submit']"),f=document.querySelector(".register-container > input[type='submit']"),S=document.querySelector(".login-container  input[name='username']"),h=document.querySelector(".login-container  input[name='password']"),c=document.querySelector(".register-container > input[name='username']"),n=document.querySelector(".register-container  input[name='password']"),o=document.querySelector(".register-container  input[name='repeat-password']"),s=document.querySelector(".loading"),b=document.querySelector(".showPasswordLogin"),q=document.querySelector(".showPasswordRegister"),R=document.querySelector(".showPasswordRepeatRegister");b.addEventListener("click",()=>{d(h)});q.addEventListener("click",()=>{d(n)});R.addEventListener("click",()=>{d(o)});const d=e=>{e.getAttribute("type")==="password"?e.setAttribute("type","text"):e.setAttribute("type","password")};y.addEventListener("click",()=>{a.classList.contains("hidden-register")?(m.classList.toggle("hidden-login"),setTimeout(()=>{a.classList.toggle("hidden-register")},300)):(a.classList.toggle("hidden-register"),setTimeout(()=>{m.classList.toggle("hidden-login")},300))});L.addEventListener("click",e=>{e.preventDefault(),p(S.value,h.value)});const p=async(e,t)=>{if(!e||!t){alert("faltan datos");return}s.classList.add("loading-show"),s.classList.remove("loading-hidden"),console.log("cargando...");const i={username:e,password:t};try{const u=await(await fetch(`${w.url}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json(),{token:g}=u;if(!g){const{message:v}=u;r(v),s.classList.remove("loading-show"),s.classList.add("loading-hidden"),console.log("error");return}console.log("errorrr"),localStorage.setItem("token",g),window.location.href="/index.html"}catch(l){console.log("error"),s.classList.remove("loading-show"),s.classList.add("loading-hidden"),r(`error en el servidor
`+l.message)}};f.addEventListener("click",e=>{e.preventDefault(),k()});const k=async()=>{if(!(!c.value||!n.value||!o.value)){if(!P(n.value,o.value)){alert("las contraseÃ±as no coinciden");return}try{s.classList.add("loading-show"),s.classList.remove("loading-hidden");const e={username:c.value,password:n.value},t=await fetch(`${w.url}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const i=await t.text();s.classList.remove("loading-show"),s.classList.add("loading-hidden"),r(i);return}s.classList.remove("loading-show"),s.classList.add("loading-hidden"),p(c.value,n.value)}catch(e){s.classList.remove("loading-show"),s.classList.add("loading-hidden"),r(`error en el servidor
`+e.message)}}};o.addEventListener("input",e=>{n.value!=o.value?o.style.backgroundColor="rgba(255, 114, 114,.5)":o.style.backgroundColor="rgb(255, 255, 255)"});const P=(e,t)=>e==t;
